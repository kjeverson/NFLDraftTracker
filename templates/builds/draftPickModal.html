<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/modal.css') }}">
<div id="draftPickModal" class="modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-xl bg-dark text-white">
        <div class="modal-content bg-dark" >
            <div class="modal-body bg-dark" style="background: rgba(0,0,0,0.5);">
                <!-- SELECTED PROSPECT -->
                {% if draft_pick.prospect[0] %}
                <div class="row prospect-row" style="background:linear-gradient(to top, rgba(0,0,0,0) 30%, #{{ draft_pick.pick_owner.primary_color }})">
                    <div class="col-3 position-relative">
                        <div class="img-container">
                            <img src="{{ url_for('static', filename='img/headshots/'+ draft_pick.prospect[0].prospect_year|string + '/' + draft_pick.prospect[0].ID|string +'.png') }}"
                                 onerror="this.src='{{ url_for('static', filename='img/headshots/default.png') }}'"
                                 class="img-fluid player-img"
                            >
                            <img class="team-logo"
                                 src="{{ url_for('static', filename='img/NFL/'+ draft_pick.pick_owner.key +'.png') }}"
                            >
                        </div>
                    </div>
                    <div class="col-4 d-flex align-items-center">
                        <div>
                            <h4 style="font-weight: 200; text-transform: uppercase;  margin-bottom: 0;"><i>{{ draft_pick.prospect[0].fname }}</i></h4>
                            <h1 style="text-transform: uppercase; margin-top: 0;"><i>{{ draft_pick.prospect[0].lname }}</i></h1>
                            <h6 style="font-weight: 200; margin-bottom: 0;">{{ draft_pick.prospect[0].position }} • {{ draft_pick.pick_owner.fullname }}</h6>
                            <small style="font-weight: 200; margin-top: 0;">Height: {{ draft_pick.prospect[0].height }} • Weight: {{ draft_pick.prospect[0].weight }} lbs</small>
                        </div>
                    </div>
                    <div class="col-2 d-flex justify-content-end align-items-center">
                        <div>
                            <h6 style="font-weight: 200; text-transform: uppercase;"><i>Rank:</i></h6>
                            <h6 style="font-weight: 200; text-transform: uppercase;"><i>Draft Status: </i></h6>
                            <h6 style="font-weight: 200; text-transform: uppercase;"><i>Comparison: </i></h6>
                            <h6 style="font-weight: 200; text-transform: uppercase;"><i>Role: </i></h6>
                        </div>
                    </div>
                    <div class="col-3 d-flex justify-content-start align-items-center">
                        <div>
                            <h6 style="text-transform: uppercase;"><i>{{ draft_pick.prospect[0].rank if draft_pick.prospect[0].rank else "--" }}</i></h6>
                            <h6 style="text-transform: uppercase;"><i>Round {{ draft_pick.round }}, Pick {{ draft_pick.pick }} </i></h6>
                            <h6 style="text-transform: uppercase;"><i>{{ draft_pick.prospect[0].comparison if draft_pick.prospect[0].comparison else "--" }}</i></h6>
                            <h6 style="text-transform: uppercase;"><i>{{ draft_pick.prospect[0].role if draft_pick.prospect[0].role else "--" }}</i></h6>
                        </div>
                    </div>
                </div>
                {% endif %}
                        <!-- PICK OWNER NEEDS -->
                        <div class="row p-2 justify-content-center">
                    <div class="col-2 align-self-center">Needs:</div>
                  <div class="row p-1 justify-content-center">
                    {% set drafted = team.get_drafted_positions() %}
                    {% for need in team.get_needs() %}
                    <div class="col-2">
                      <button class="btn w-100 {% if need in drafted %}btn-outline-secondary{% else %}btn-secondary{% endif %}"disabled>{{ need }}</button>
                    </div>
                    {% endfor %}
                  </div>
                </div>
                <!-- PICK OWNER DRAFTCLASS -->
                <div class="row p-2 ">
                    <table class="table table-dark">
                        <tbody>
                        {% for team_pick in team.picks | sort(attribute='pick', reverse=False) %}
                        <tr data-id="{{ team_pick.ID }}">
                            <td style="background:linear-gradient(to left, rgba(0,0,0,0) 35%, #{{ team.primary_color }})">
                                <div class="row align-items-center">
                                    <div class="col-1">
                                        <div class="row text-center justify-content-center">
                                            <h4><i>{{ team_pick.pick }}</i></h4>
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <img src="{{ url_for('static', filename='img/NFL/'+ team.key +'.png') }}"
                                             height="40px">
                                    </div>
                                    {% if team_pick.prospect[0] %}
                                    <div class="col-8">
                        <div class="row">
                          <h6 style="text-transform: uppercase;  margin-bottom: 0;">
                            {% if team_pick.prospect[0].favorite %}
                            <i class="bi bi-star-fill text-warning"></i>
                            {% else %}
                            <i class="bi bi-star"></i>
                            {% endif %}
                            <i>{{ team_pick.prospect[0].name }}
                              {% if team_pick.prospect[0].concern %}
                              <span class="text-danger">*</span>
                              {% endif %}
                            </i>
                          </h6>
                        </div>
                        <div class="row">
                          <small style="font-weight: 200; text-transform: uppercase;  margin-top: 0;">
                            {{ team_pick.prospect[0].position }}{% if team_pick.prospect[0].college_team %} | {{ team_pick.prospect[0].college_team.location }} {% endif %}
                          </small>
                        </div>
                      </div>
                                    {% else %}
                                    <div class="col-8"></div>
                                    {% endif %}
                                    <div class="col-1">
                                        {% if team_pick.traded %}
                                        <i class="bi bi-arrow-repeat text-warning"></i>
                                        {% endif %}
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% if draft_pick.prospect %}
            <div class="modal-footer">
                <button type="button" data-id="{{ draft_pick.ID }}" class="btn btn-sm btn-secondary" onclick="undoSelection(this.getAttribute('data-id'))">Undo Selection</button>
            </div>
            {% endif %}
        </div>
    </div>
</div>